(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{9370:function(e,c,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fibonacci-backend-cache/backend-cache-kustomize",function(){return n(5305)}])},5305:function(e,c,n){"use strict";n.r(c),n.d(c,{__toc:function(){return d},default:function(){return h}});var i=n(5893),a=n(2673),s=n(373),o=n(8426);n(9128);var r=n(2643),t={src:"/docs-fibonacci-backend/_next/static/media/1.ad9094d5.png",height:901,width:715,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAIAAABVpBlvAAAAn0lEQVR42gVAuQqCYAD+yKAhoiKkogM8fiU0TCOPzBOpFC3pGArEwSUC1xp79cBUvw3XeWMso8vwsiEqFsxofy7ugrppzVboc+gTZBn3+3hOHIzlkCYqBgQdir8Sh90mipsymg9aRBtsPrd72nFhxUSPmiMRbmh836dHVRjRhV76FGshOEh1nVavsKxk0xFASwDIbuIrbvIsddvjqKH4BwR0HFyuAY3WAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8};let d=[{depth:2,value:"Kustomize Overlay 작업",id:"kustomize-overlay-작업"},{depth:2,value:"깃헙 리포지터리",id:"깃헙-리포지터리"},{depth:2,value:"Secret",id:"secret"},{depth:2,value:"Redis",id:"redis"},{depth:2,value:"fibonacci-backend-cache 의 kustomize 작업",id:"fibonacci-backend-cache-의-kustomize-작업"},{depth:2,value:"리소스 파일들",id:"리소스-파일들"}];function _createMdxContent(e){let c=Object.assign({h2:"h2",blockquote:"blockquote",p:"p",a:"a",code:"code",pre:"pre",span:"span",img:"img",ul:"ul",li:"li"},(0,r.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.h2,{id:"kustomize-overlay-작업",children:"Kustomize Overlay 작업"}),"\n",(0,i.jsxs)(c.blockquote,{children:["\n",(0,i.jsx)(c.p,{children:"코드작업은 정말 빠르게 하고 쉬웠는데, 문서작업은 왜 이렇게 힘든걸까요? ㅠㅠ"}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(c.h2,{id:"깃헙-리포지터리",children:"깃헙 리포지터리"}),"\n",(0,i.jsxs)(c.p,{children:["여기서 정리하는 내용들은 ",(0,i.jsx)(c.a,{href:"https://github.com/chagchagchag/fibonacci-backend",children:"github.com/chagchagchag/fibonacci-backend"})," 내의 ",(0,i.jsx)(c.a,{href:"https://github.com/chagchagchag/fibonacci-backend/tree/main/k8s/kustomize",children:"fibonacci-backend/k8s/kustomize"})," 디렉터리에 있는 내용들입니다.",(0,i.jsx)("br",{})]}),"\n",(0,i.jsx)(c.h2,{id:"secret",children:"Secret"}),"\n",(0,i.jsxs)(c.p,{children:[(0,i.jsx)(c.a,{href:"https://github.com/chagchagchag/fibonacci-backend/tree/main/k8s/kustomize",children:"fibonacci-backend/k8s/kustomize"})," 디렉터리 내의 ",(0,i.jsx)(c.code,{children:"create-secret.sh"})," 파일에 대한 내용입니다.",(0,i.jsx)("br",{})]}),"\n",(0,i.jsx)(c.p,{children:"kustomize 를 적용하기에 앞서서 아래의 내용을 적용해줍니다."}),"\n",(0,i.jsx)(c.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(c.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(c.span,{className:"line",children:[(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-function)"},children:"kubectl"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"-n"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"fibonacci"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"create"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"secret"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"generic"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"fibonacci-cache-secret"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"--from-literal=api-key=abcd-efgh-ijkl-1111"})]})})}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(c.h2,{id:"redis",children:"Redis"}),"\n",(0,i.jsxs)(c.p,{children:[(0,i.jsx)(c.a,{href:"https://github.com/chagchagchag/fibonacci-backend/tree/main/k8s/kustomize",children:"fibonacci-backend/k8s/kustomize"})," 디렉터리 내의 ",(0,i.jsx)(c.code,{children:"create-redis.sh"})," 파일에 대한 내용입니다.",(0,i.jsx)("br",{}),"\r\nredis 가 설치되어 있지 않다면 아래의 내용을 적용해줍니다."]}),"\n",(0,i.jsx)(c.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(c.code,{"data-language":"bash","data-theme":"default",children:[(0,i.jsxs)(c.span,{className:"line",children:[(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-function)"},children:"kubectl"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"apply"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"redis-service.yml"})]}),"\n",(0,i.jsxs)(c.span,{className:"line",children:[(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-function)"},children:"kubectl"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"apply"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(c.span,{style:{color:"var(--shiki-token-string)"},children:"redis-pod.yml"})]})]})}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(c.h2,{id:"fibonacci-backend-cache-의-kustomize-작업",children:"fibonacci-backend-cache 의 kustomize 작업"}),"\n",(0,i.jsxs)(c.p,{children:["대략적인 구조는 이렇습니다.",(0,i.jsx)("br",{}),"\r\n",(0,i.jsx)(c.img,{placeholder:"blur",src:t})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(c.p,{children:[(0,i.jsx)(c.code,{children:"base"})," 디렉터리"]}),"\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsx)(c.li,{children:"기본적인 리소스 들의 정의 파일들을 둡니다."}),"\n",(0,i.jsxs)(c.li,{children:["이렇게 정의된 파일들을 ",(0,i.jsx)(c.code,{children:"base"})," 디렉터리 내에서 kustomize 하는 역할을 하는 파일은 ",(0,i.jsx)(c.code,{children:"kustomization.yml"})," 입니다."]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(c.p,{children:[(0,i.jsx)(c.code,{children:"overlay"})," 디렉터리"]}),"\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"overlay/develop"})," 디렉터리","\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"base/kustomization.yml"})," 파일에서 조합한 리소스파일 들에서 ",(0,i.jsx)(c.code,{children:"tag"}),", ",(0,i.jsx)(c.code,{children:"namespace"}),"를 ",(0,i.jsx)(c.code,{children:"develop"})," 에 맞게끔 덮어쓰는 작업을 합니다."]}),"\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"overlay/develop/kustomization.yml"})," 파일에서 따로 ",(0,i.jsx)(c.code,{children:"develop"})," 버전에 맞도록 재정의한 ",(0,i.jsx)(c.code,{children:"namespace"}),", ",(0,i.jsx)(c.code,{children:"tag"})," 등이 적용되어 재정의됩니다."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"overlay/production"})," 디렉터리","\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"base/kustomization.yml"})," 파일에서 조합한 리소스파일 들에서 ",(0,i.jsx)(c.code,{children:"tag"}),", ",(0,i.jsx)(c.code,{children:"namespace"}),"를 ",(0,i.jsx)(c.code,{children:"production"})," 에 맞게끔 덮어쓰는 작업을 합니다."]}),"\n",(0,i.jsxs)(c.li,{children:[(0,i.jsx)(c.code,{children:"overlay/production/kustomization.yml"})," 파일에서 따로 ",(0,i.jsx)(c.code,{children:"production"})," 버전에 맞도록 재정의한 ",(0,i.jsx)(c.code,{children:"namespace"}),", ",(0,i.jsx)(c.code,{children:"tag"})," 등이 적용되어 재정의됩니다.",(0,i.jsx)("br",{})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(c.h2,{id:"리소스-파일들",children:"리소스 파일들"}),"\n",(0,i.jsx)(c.p,{children:"설명 꽤 복잡한돼 힘든돼 아 정말..."})]})}let l={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:c}=Object.assign({},(0,r.a)(),e.components);return c?(0,i.jsx)(c,{...e,children:(0,i.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/fibonacci-backend-cache/backend-cache-kustomize.mdx",route:"/fibonacci-backend-cache/backend-cache-kustomize",timestamp:1708062566e3,pageMap:[{kind:"Folder",name:"fibonacci-backend-cache",route:"/fibonacci-backend-cache",children:[{kind:"MdxPage",name:"backend-cache-coding",route:"/fibonacci-backend-cache/backend-cache-coding"},{kind:"MdxPage",name:"backend-cache-graceful-shutdown",route:"/fibonacci-backend-cache/backend-cache-graceful-shutdown"},{kind:"MdxPage",name:"backend-cache-jib-build",route:"/fibonacci-backend-cache/backend-cache-jib-build"},{kind:"MdxPage",name:"backend-cache-k8s-yaml",route:"/fibonacci-backend-cache/backend-cache-k8s-yaml"},{kind:"MdxPage",name:"backend-cache-kustomize",route:"/fibonacci-backend-cache/backend-cache-kustomize"},{kind:"MdxPage",name:"backend-cache-perf-test",route:"/fibonacci-backend-cache/backend-cache-perf-test"},{kind:"MdxPage",name:"introduce-fibonacci-backend-cache",route:"/fibonacci-backend-cache/introduce-fibonacci-backend-cache"},{kind:"Meta",data:{"introduce-fibonacci-backend-cache":"소개","backend-cache-coding":"Backend 코드 작업","backend-cache-jib-build":"Gradle Jib 빌드 정의, 이미지 생성, 푸시","backend-cache-k8s-yaml":"k8s 리소스 정의 & 로컬 k8s 확인","backend-cache-kustomize":"Kustomize Overlay 작업","backend-cache-graceful-shutdown":"Graceful Shutdown 처리","backend-cache-perf-test":"부하테스트"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"setup",route:"/setup",children:[{kind:"MdxPage",name:"deploy-environment",route:"/setup/deploy-environment"},{kind:"MdxPage",name:"local-k8s-setup",route:"/setup/local-k8s-setup"},{kind:"MdxPage",name:"redis-environment",route:"/setup/redis-environment"},{kind:"MdxPage",name:"reference",route:"/setup/reference"},{kind:"Meta",data:{"local-k8s-setup":"로컬 k8s 셋업","deploy-environment":"배포환경","redis-environment":"레디스 환경설정",reference:"참고한 스터디 자료들"}}]},{kind:"Meta",data:{index:"Introduction",setup:"SETUP","fibonacci-backend-cache":"fibonacci-backend-cache","fibonacci-backend-web":"fibonacci-backend-web",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Backend Cache Kustomize",headings:d},pageNextRoute:"/fibonacci-backend-cache/backend-cache-kustomize",nextraLayout:s.ZP,themeConfig:o.Z};var h=(0,a.j)(l)},8426:function(e,c,n){"use strict";var i=n(5893);n(7294);let a={logo:(0,i.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/chagchagchag/docs-fibonacci-backend"},docsRepositoryBase:"https://github.com/chagchagchag/docs-fibonacci-backend",footer:{text:"Nextra Docs Template"}};c.Z=a},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=9370)}),_N_E=e.O()}]);